<main>
    <%- include('../partials/donorSidebar') %>

    <div id="main-wrapper" class="container-fluid">

        <div class="row bg-white shadow-sm p-3">
            <div class="col-md-auto">
                <span class="me-3" id="sidebar-toggler-btn"><i class="fas fa-bars"></i></span>
            </div>
            <div class="col-md">
                <h5 class="m-0 color-theme d-inline-block">Pending Donations</h5>
            </div>
        </div>

        <div class="row m-4">
            <% for(let i=0; i<pendingDonations.length; i++) { %>
                <div class="col-md-6 mb-4">
                    <div class="card border shadow-sm rounded h-100">
                        <div class="card-body p-4">
                            <div class="mb-2">
                                <span class="fw-bold">Food Type:</span>
                                <span><%= pendingDonations[i].foodType %></span>
                            </div>
                            <div class="mb-2">
                                <span class="fw-bold">Quantity:</span>
                                <span><%= pendingDonations[i].quantity %></span>
                            </div>
                            <div class="mb-2">
                                <span class="fw-bold">Address Given:</span>
                                <span><%= pendingDonations[i].address %></span>
                            </div>
                            <div class="mb-2">
                                <span class="fw-bold">Phone Given:</span>
                                <span><%= pendingDonations[i].phone %></span>
                            </div>
                            <div class="mb-2">
                                <span class="fw-bold">Time of Cooking:</span>
                                <span><%= pendingDonations[i].cookingTime.toLocaleString("en-IN", { dateStyle: "medium", timeStyle: "short"}) %></span>
                            </div>
                            <div class="mb-2">
                                <span class="fw-bold">Status:</span>

                                <% if(pendingDonations[i].status == "pending") { %>
                                    <span class="badge bg-warning text-dark">Pending Processing</span>
                                <% } else if(pendingDonations[i].status == "rejected") { %>
                                    <span class="badge bg-danger">Rejected</span>
                                <% } else if(pendingDonations[i].status == "accepted") { %>
                                    <span class="badge bg-primary text-light">Accepted (Agent Assignment Pending)</span>
                                <% } else if(pendingDonations[i].status == "assigned") { %>
                                    <span class="badge bg-success text-light">Assigned to <%= pendingDonations[i].agent.firstName + " " + pendingDonations[i].agent.lastName %></span>
                                <% } %>
                            </div>

                            <% if(pendingDonations[i].status == "rejected") { %>
                                <div class="mt-3">
                                    <a href="/donor/donation/deleteRejected/<%= pendingDonations[i]._id %>" class="btn btn-sm btn-outline-secondary">Okay</a>
                                </div>
                            <% } %>
                        </div>
                    </div>
                </div>
            <% } %>
        </div>

    </div>
</main>
